@using System.Net.Http
@inject HttpClient Http
@using System.Net.Http.Json
@using System.Threading.Tasks
@using Microsoft.AspNetCore.Components.Web
@using Registry.Domain
@using Registry.Domain.Model


@*<EditForm Model="@newLesson">
    <InputSelect @bind-Value="newLesson.LessonType">
        @foreach (var lessontype in Enum.GetValues(typeof(LessonType)))
        {
            <option value="@lessontype">@lessontype</option>
        }
    </InputSelect>
</EditForm>*@



<div class="form-container">
    <input @bind="newTopic" placeholder="Тема" />
    <input @bind="newLessonType" placeholder="Тип занятия" />
    
    <button class="custom-button" @onclick="AddLesson">Добавить новое занятие</button>
</div>


@code {

    private string newTopic;
    private string newLessonType;



    [Parameter]
    public EventCallback<string> OnAddLesson { get; set; }

    private async Task AddLesson()
    {
        var lesson = new Lesson
            {
                Topic = newTopic,
                LessonType = newLessonType

            };
        newTopic = "";
        newLessonType = "";

        await Http.PostAsJsonAsync("https://localhost:7233/api/Lesson", lesson);
        await OnAddLesson.InvokeAsync("OK");
    }
}